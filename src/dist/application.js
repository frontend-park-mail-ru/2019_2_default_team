!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return Array.isArray(e)?function(e,t){for(var n,r="",i="",a=Array.isArray(t),u=0;u<e.length;u++)(n=o(e[u]))&&(a&&t[u]&&(n=l(n)),r=r+i+n,i=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var o in e)o&&e[o]&&r.call(e,o)&&(t=t+n+o,n=" ");return t}(e):e||""}function i(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)r.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function a(e,t,n,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var o=typeof t;return"object"!==o&&"function"!==o||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=l(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],o=1;o<t.length;o++)r=e(r,t[o]);return r}for(var a in n)if("class"===a){var u=t[a]||[];t[a]=(Array.isArray(u)?u:[u]).concat(n[a]||[])}else if("style"===a){u=(u=i(t[a]))&&";"!==u[u.length-1]?u+";":u;var l=i(n[a]);l=l&&";"!==l[l.length-1]?l+";":l,t[a]=u+l}else t[a]=n[a];return t},t.classes=o,t.style=i,t.attr=a,t.attrs=function(e,t){var n="";for(var u in e)if(r.call(e,u)){var l=e[u];if("class"===u){l=o(l),n=a(u,l,!1,t)+n;continue}"style"===u&&(l=i(l)),n+=a(u,l,!1,t)}return n};var u=/["&<>]/;function l(e){var t=""+e,n=u.exec(t);if(!n)return e;var r,o,i,a="";for(r=n.index,o=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==r&&(a+=t.substring(o,r)),o=r+1,a+=i}return o!==r?a+t.substring(o,r):a}t.escape=l,t.rethrow=function e(t,r,o,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&r||i))throw t.message+=" on line "+o,t;try{i=i||n(3).readFileSync(r,"utf8")}catch(n){e(t,null,o)}var a=3,u=i.split("\n"),l=Math.max(o-a,0),c=Math.min(u.length,o+a);a=u.slice(l,c).map((function(e,t){var n=t+l+1;return(n==o?"  > ":"    ")+n+"| "+e})).join("\n");throw t.path=r,t.message=(r||"Pug")+":"+o+"\n"+a+"\n\n"+t.message,t}},function(e,t,n){var r=n(0);e.exports=function(e){var t,n="",o={};n+="<style>.container{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: #5d2d2e;\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cpolygon fill='%23b86969' fill-opacity='.1' points='120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0'/%3E%3C/svg%3E\");\n    padding: 15px;\n}\n\nh1 {\n    font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\n    color: white;\n    margin-bottom: 50px;\n}\n\n.card-item{\n    background-color: aliceblue;\n    width: 360px;\n    height: 360px;\n}\n.card {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n    text-align: center;\n    font-family: arial;\n    max-width: 380px;\n    align-self: stretch;\n    /*-webkit-transition: all 0.3s ease;;*/\n    /*-moz-transition: all 0.3s ease;;*/\n    /*-o-transition: all 0.3s ease;;*/\n    /*transition: all 0.3s ease;*/\n    background-color: #c7ecee;\n    display: flex;\n    grid-template-rows: 10px 10px;\n    position: relative;\n}\n\n/*.card:hover {*/\n/*    -webkit-transform: scale(1.2);*/\n/*    -ms-transform: scale(1.2);*/\n/*    transform: scale(1.2);*/\n/*}*/\n\n.price {\n    color: grey;\n    font-size: 22px;\n}\n\n.card button {\n    display: flex;\n    border: none;\n    outline: 0;\n    padding: 12px;\n    color: white;\n    background-color: #222f3e;\n    text-align: center;\n    cursor: pointer;\n    width: 100%;\n    font-size: 18px;\n    flex-direction: column;\n}\n\n.card button:hover {\n    opacity: 0.7;\n}\n\n.card-deck {\n    /* max-height: 550px; */\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n}\n\n.card {\n    margin: 10px;\n}\n\nh1{\n    margin-bottom: auto;\n}\n\n.card-item-blur {\n    align-self: end;\n    height: 120px;\n    background: rgba(1,0,0,0.6);\n    position: absolute;\n    width: 360px;\n    color: #dff9fb;\n}\n\n.card-item-blur:hover {\n    display: block;\n}\n\nhtml {\n    height: 100%;\n}\n\n\n\n.body {\n    /* display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-items: center;\n    align-self: center;\n    padding: 10px; */\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n}\n\na {\n    transition-property: transform;\n    transition-duration: 0.1s;\n    cursor: pointer;\n}\n\na:hover {\n    transform: scale(1.25);\n}\n\na:active {\n    transform: scale(1.25) translateY(-2px);\n}</style>";var i="https://static.karofilm.ru/uploads/film/desktop/e3/b6/4b/5215d5811b80298172dad73fd1.jpg";o["card-deck"]=t=function(e,o,i){this&&this.block,this&&this.attributes;n=n+'<div class="card"><div class="card-item"><img'+r.attr("src",o,!0,!0)+'></div><div class="card-item-blur"'+r.attr("src",o,!0,!0)+"><h1>"+r.escape(null==(t=e)?"":t)+"</h1><a"+(r.attr("onclick",i,!0,!0)+r.attr("href",i,!0,!0))+' data-section="film">Подробнее</a></div></div>'},n+='<div class="container"><h1>Фильмы</h1><div class="body">';for(var a=3;a>0;)(function(){var e=[1,2,3,4];if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){o["card-deck"]("Joker",i)}else{n=0;for(var t in e){n++;o["card-deck"]("Joker",i)}}}).call(this),a--;return n+="</div></div>"}},function(e,t,n){var r=n(0);e.exports=function(e){var t,n="",o={},i=e||{};return function(e,i,a){n+="<style>.menu {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n}\n\n.menu-el-right {\n    float: right;\n}\n\n.menu-el-left {\n    float: left;\n}\n\n.inner-menu-element {\n    display: block;\n    color: white;\n    font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n    width: 90px;\n    transition-property: transform;\n    transition-duration: 0.25s;\n}\n\n.inner-menu-element:hover {\n    transform: translateY(-5px);\n}\n\n.inner-menu-element:active {\n    transform: translateY(-5px) scale(1.33);\n}</style>",o["item-right"]=t=function(e,o,i){this&&this.block,this&&this.attributes;n=n+'<li class="menu-el-right"><a class="inner-menu-element"'+r.attr("href",o,!0,!0)+r.attr("data-section",i,!0,!0)+">"+r.escape(null==(t=e)?"":t)+"</a></li>"},o["item-left"]=t=function(e,o,i){this&&this.block,this&&this.attributes;n=n+'<li class="menu-el-left"><a class="inner-menu-element"'+r.attr("href",o,!0,!0)+r.attr("data-section",i,!0,!0)+">"+r.escape(null==(t=e)?"":t)+"</a></li>"};var u;n+='<ul class="menu">',o["item-left"]("Афиша","/poster","poster"),o["item-left"]("О нас","/about","about"),null!=(null!=(u=new e("id"+"=([^;]+)").exec(i.cookie))?a(u[1]):null)?(o["item-right"]("Выход","/signout","signout"),o["item-right"]("Профиль","/profile","profile")):(o["item-right"]("Регистрация","/signup","signup"),o["item-right"]("Вход","/signin","signin")),n+="</ul>"}.call(this,"RegExp"in i?i.RegExp:"undefined"!=typeof RegExp?RegExp:void 0,"document"in i?i.document:"undefined"!=typeof document?document:void 0,"unescape"in i?i.unescape:"undefined"!=typeof unescape?unescape:void 0),n}},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var u=["/profile","/poster","/film"],l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.routes=new Map,this.currentRoute=null,window.onpopstate=function(e){window.location.pathname&&n.route({path:window.location.pathname,addToHistory:!1})}}var t,n,r;return t=e,r=[{key:"_normalizePath",value:function(e){return"/"===e.charAt(e.length-1)&&"/"!==e?e.slice(0,e.length-1):e}}],(n=[{key:"redirect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.route({path:e,data:t,addToHistory:!0})}},{key:"add",value:function(e,t){this.routes.set(e,t)}},{key:"route",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.data,r=void 0===n?{}:n,i=e.addToHistory,a=void 0===i||i,l=this.routes.get(this._getRoutePath(this.currentRoute));l&&l.close(),a&&window.history.pushState(null,null,t);var c=t.split("?")[0];console.log(c);var s=this._getRoutePath(c);if(this.routes.has(s)){var f=this.routes.get(s);if(u.find((function(e){return e===s}))){var p=this._extractIdFromPath(t);r=o({id:p},r)}console.log("router-> render(data)",r),this.currentRoute=t,f.openWithData(r)}else if(this.routes.has(c)){var d=this.routes.get(c);console.log("router-> render(data)",r),this.currentRoute=t,d.openWithData(r)}}},{key:"_getRoutePath",value:function(e){if(e)return"/"+e.split("/")[1]}},{key:"start",value:function(){var t=this;window.addEventListener("click",(function(n){"A"===n.target.tagName&&(n.preventDefault(),t.route({path:e._normalizePath(n.target.pathname),addToHistory:!0}))}),!0),this.route({path:e._normalizePath(window.location.pathname),addToHistory:!0})}},{key:"_extractIdFromPath",value:function(e){return e.split("/").pop()}}])&&a(t.prototype,n),r&&a(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new Map,n.forEach((function(e){return t.events.set(e,[])}))}var t,n,r;return t=e,(n=[{key:"subscribeToEvent",value:function(e,t){if(!this.events.has(e))throw new Error("EventBus: Unknown event ".concat(e));this.events.get(e).push(t)}},{key:"triggerEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!this.events.has(e))throw new Error("EventBus: Unknown event ".concat(e));var o=this.events.get(e);o.forEach((function(e){return e.apply(void 0,n)}))}},{key:"dispatchEvent",value:function(e){var t;if(void 0!==e){if(void 0!==this.events[e]){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.events)[e].apply(t,r)}console.log("No such event: "+e)}else console.log("No event value")}}])&&c(t.prototype,n),r&&c(t,r),e}(),f=n(1),p=n.n(f);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v="Password must have: 8 symbols, 1 numeral, 1 upper case letter and 1 lowercase.",h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,y=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.{8,})/,g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"validateEmail",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||n&&!e.validateEmailRegex(t))return"Invalid email"}},{key:"validatePassword",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||n&&!e.validatePassRegex(t))return v}},{key:"validateEmailRegex",value:function(e){return h.test(String(e).toLowerCase())}},{key:"validatePassRegex",value:function(e){return y.test(String(e))}},{key:"isEmptyField",value:function(e){return""===e}}],(n=null)&&d(t.prototype,n),r&&d(t,r),e}();function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._root=t,this._globalEventBus=r,this._template=n,this.isViewClosed=!0}var t,n,r;return t=e,r=[{key:"_addInputError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e&&e.classList.add("input_invalid"),t&&(t.classList.add("error_active"),t.innerHTML=n)}},{key:"_validateObligatoryInputs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;return t&&t.forEach((function(t){var r=t.nextElementSibling;g.isEmptyField(t.value)?(e._addInputError(t,r,"Обязательное поле"),n=!0):e._removeInputError(t,r)})),n}},{key:"_removeInputError",value:function(e,t){e&&e.classList.remove("input_invalid"),t&&(t.classList.remove("error_active"),t.innerHTML="")}}],(n=[{key:"render",value:function(e){this._root.innerHTML=this._template(e),this.isViewClosed=!1,this.onRender()}},{key:"onRender",value:function(){}},{key:"hide",value:function(){this._root.innerHTML="",this.isViewClosed=!0}},{key:"merge",value:function(e){this._data=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._data,{},e)}}])&&w(t.prototype,n),r&&w(t,r),e}(),k={checkAuth:"checkAuth",checkAuthResponse:"authR",signOut:"signOut",signOutResponse:"signOutR",signIn:"signIn",signInSuccess:"signInS",signInFailed:"signInF",signUpCustomer:"signUpCustomer",signUpSuccess:"signUpS",signUpFailed:"signUpF"},P={loadProfile:"loadProfile",loadProfileSuccess:"loadProfileS",loadProfileFailed:"loadProfileF",saveButtonClicked:"saveButtonC",saveProfile:"saveProfile",saveProfileSuccess:"saveProfileS",saveProfileFailed:"saveProfileF",saveAvatar:"saveAvatar",saveAvatarSuccess:"saveAvatarS",saveAvatarFailed:"saveAvatarF"};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e,n,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(o=!(a=S(t).call(this,e,p.a,n,r))||"object"!==_(a)&&"function"!=typeof a?E(i):a)._globalEventBus.subscribeToEvent(k.checkAuthResponse,o._onAuthResponse.bind(E(o))),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.merge(e),this.isViewClosed=!1,this._globalEventBus.triggerEvent(k.checkAuth),x(S(t.prototype),"render",this).call(this,e)}},{key:"onRender",value:function(){}},{key:"_onAuthResponse",value:function(e){this.isViewClosed||(this.merge(e),x(S(t.prototype),"render",this).call(this,this._data))}}])&&j(n.prototype,r),o&&j(n,o),t}(O);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"_view",new O),C(this,"openWithData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o._view.render(e)})),C(this,"close",(function(){o._view.hide()})),this._root=t,this._globalEventBus=n,this._router=r};function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=F(this,I(t).call(this,e,n,r)))._view=new R(o._root,o._globalEventBus),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),t}(A);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"doGet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return fetch(e.getServerUrl()+t,{method:"GET",mode:"no-cors",credentials:"include"})}},{key:"doPost",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getServerUrl();return fetch(r+t,{method:"POST",mode:"cors",credentials:"include",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}})}},{key:"doDelete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return fetch(e.getServerUrl()+t,{method:"DELETE",mode:"cors",credentials:"include"})}},{key:"doPut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e.getServerUrl()+t,{method:"PUT",mode:"cors",credentials:"include",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}})}},{key:"doPostFormData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=void 0===n?"/":n,o=t.body,i=void 0===o?{}:o,a=localStorage.getItem("token");return fetch(e.getServerUrl()+r,{method:"POST",body:i,mode:"cors",credentials:"include",headers:{"X-CSRF-Token":a}})}},{key:"doPutFormData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1?arguments[1]:void 0;return fetch(e.getServerUrl()+t,{method:"PUT",mode:"cors",credentials:"include",body:n})}},{key:"getServerUrl",value:function(){return"http://127.0.0.1:8080"}}],(n=null)&&z(t.prototype,n),r&&z(t,r),e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"login",value:function(e){var t=e.email,n=e.password;return L.doPost("/sessions/",{email:t,password:n})}},{key:"authCheck",value:function(){return L.doGet("/session")}},{key:"logout",value:function(){return L.doDelete("/session/")}},{key:"register",value:function(e){var t=e.email,n=e.password,r=e.username;return L.doPost("/users/",{email:t,password:n,username:r})}},{key:"editAvatar",value:function(e){var t=e.avatar,n=new FormData;return n.append("file",t.avatar),L.doPostFormData("/users/images/",n)}},{key:"editProfile",value:function(e){var t=e.username,n=e.description;return L.doPut("/users/",{username:t,description:n})}},{key:"getProfileInfo",value:function(){return L.doGet("/users/")}},{key:"getAnotherUserInfo",value:function(e){var t=e.userID;return L.doGet("/users/".concat(t,"/"))}},{key:"getFilmInfo",value:function(e){var t=e.filmID;return L.doGet("/films/".concat(t,"/"))}},{key:"getPageFilms",value:function(e){var t=e.pageID;return L.doGet("/films/".concat(t,"/"))}},{key:"addNewFilm",value:function(e){var t=e.title,n=e.description,r=e.genres,o=e.date,i=e.actors,a=e.directors,u=e.rating;return L.doPost("/films/",{title:t,description:n,genres:r,date:o,actors:i,directors:a,rating:u})}},{key:"checkSession",value:function(){return L.doGet({url:"/auth"})}}],(n=null)&&M(t.prototype,n),r&&M(t,r),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"_loadPage",value:function(e){var t=this;G.getPageFilms(e).then((function(e){e.ok?e.json().then((function(e){t._globalEventBus.triggerEvent("loadSuccess",e)})):e.json().then((function(e){t._globalEventBus.triggerEvent("loadFailed",e)}))})).catch((function(e){console.error(e)}))}},{key:"setGlobalEventBus",value:function(e){this._globalEventBus=e,this._globalEventBus.subscribeToEvent(k.checkAuth,this._onCheckAuth.bind(this))}},{key:"_onCheckAuth",value:function(){G.authCheck().then((function(e){}))}}])&&N(t.prototype,n),r&&N(t,r),e}()),J=n(2),V=n.n(J);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return($="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(e,n){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(r=!(i=X(t).call(this,e,V.a,n))||"object"!==q(i)&&"function"!=typeof i?Y(o):i)._globalEventBus.subscribeToEvent(k.checkAuthResponse,r._onAuthResponse.bind(Y(r))),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(X(t.prototype),"render",this).call(this,e)}},{key:"_onAuthResponse",value:function(e){$(X(t.prototype),"render",this).call(this,e)}}])&&W(n.prototype,r),o&&W(n,o),t}(O);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ee(this,te(t).call(this,e,n,r)))._view=new K(o._root,o._globalEventBus),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),t}(A);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".page"),t=document.querySelector("header"),n=document.querySelector(".main-content"),r=new s([k,P].map((function(e){return Object.values(e)})).flat()),o={poster:H};Object.values(o).forEach((function(e){return e.setGlobalEventBus(r)}));var i=new l(e),a=new re(t,r,i),u=new U(n,r,i);a.openWithData(),i.add("/",u),i.start()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3B1Zy1ydW50aW1lL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy92aWV3cy9Qb3N0ZXIvUG9zdGVyLnB1ZyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdmlld3MvTWVudS9NZW51LnB1ZyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbW9kdWxlcy9yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZHVsZXMvZXZlbnRidXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZHVsZXMvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZHVsZXMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbW9kdWxlcy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3ZpZXdzL1Bvc3Rlci9Qb3N0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21vZHVsZXMvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29udHJvbGxlcnMvcG9zdGVyQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbW9kdWxlcy9uZXR3b3JrLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tb2R1bGVzL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbW9kZWxzL3Bvc3Rlck1vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy92aWV3cy9NZW51L01lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbnRyb2xsZXJzL21lbnVDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hcHBsaWNhdGlvbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInB1Z19oYXNfb3duX3Byb3BlcnR5IiwicHVnX2NsYXNzZXMiLCJ2YWwiLCJlc2NhcGluZyIsIkFycmF5IiwiaXNBcnJheSIsImNsYXNzTmFtZSIsImNsYXNzU3RyaW5nIiwicGFkZGluZyIsImVzY2FwZUVuYWJsZWQiLCJsZW5ndGgiLCJwdWdfZXNjYXBlIiwicHVnX2NsYXNzZXNfYXJyYXkiLCJwdWdfY2xhc3Nlc19vYmplY3QiLCJwdWdfc3R5bGUiLCJvdXQiLCJzdHlsZSIsInB1Z19hdHRyIiwiZXNjYXBlZCIsInRlcnNlIiwidHlwZSIsInRvSlNPTiIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbmRleE9mIiwicmVwbGFjZSIsIm1lcmdlIiwicHVnX21lcmdlIiwiYSIsImIiLCJhcmd1bWVudHMiLCJhdHRycyIsInZhbEEiLCJjb25jYXQiLCJ2YWxCIiwiY2xhc3NlcyIsImF0dHIiLCJvYmoiLCJwdWdfbWF0Y2hfaHRtbCIsIl9odG1sIiwiaHRtbCIsInJlZ2V4UmVzdWx0IiwiZXhlYyIsImxhc3RJbmRleCIsImVzY2FwZSIsInJlc3VsdCIsImluZGV4IiwiY2hhckNvZGVBdCIsInN1YnN0cmluZyIsInJldGhyb3ciLCJwdWdfcmV0aHJvdyIsImVyciIsImZpbGVuYW1lIiwibGluZW5vIiwic3RyIiwiRXJyb3IiLCJ3aW5kb3ciLCJtZXNzYWdlIiwicmVhZEZpbGVTeW5jIiwiZXgiLCJjb250ZXh0IiwibGluZXMiLCJzcGxpdCIsInN0YXJ0IiwiTWF0aCIsIm1heCIsImVuZCIsIm1pbiIsInNsaWNlIiwibWFwIiwibGluZSIsImN1cnIiLCJqb2luIiwicGF0aCIsInB1ZyIsImxvY2FscyIsInB1Z19pbnRlcnAiLCJwdWdfaHRtbCIsInB1Z19taXhpbnMiLCJocmVmIiwidGl0bGUiLCJmaWxtVXJsIiwidGhpcyIsImJsb2NrIiwiYXR0cmlidXRlcyIsImRlY2tzIiwiJCRvYmoiLCJwdWdfaW5kZXgwIiwiJCRsIiwibG9jYWxzX2Zvcl93aXRoIiwiUmVnRXhwIiwiZG9jdW1lbnQiLCJ1bmVzY2FwZSIsInNlY3Rpb24iLCJjb29raWUiLCJ1bmRlZmluZWQiLCJwYXRoc1dpdGhJZCIsIlJvdXRlciIsInJvb3QiLCJyb3V0ZXMiLCJNYXAiLCJjdXJyZW50Um91dGUiLCJvbnBvcHN0YXRlIiwiXyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJyb3V0ZSIsImFkZFRvSGlzdG9yeSIsImNoYXJBdCIsImRhdGEiLCJjb250cm9sbGVyIiwic2V0IiwiY3VycmVudENvbnRyb2xsZXIiLCJfZ2V0Um91dGVQYXRoIiwiY2xvc2UiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwicGF0aFdpdGhvdXRQYXJhbWV0ZXJzIiwiY29uc29sZSIsImxvZyIsInJvdXRlUGF0aCIsImhhcyIsImZpbmQiLCJlbCIsImlkIiwiX2V4dHJhY3RJZEZyb21QYXRoIiwib3BlbldpdGhEYXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwidGFyZ2V0IiwidGFnTmFtZSIsInByZXZlbnREZWZhdWx0IiwiX25vcm1hbGl6ZVBhdGgiLCJwb3AiLCJFdmVudEJ1cyIsImxpc3RPZkV2ZW50cyIsImV2ZW50cyIsImZvckVhY2giLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInB1c2giLCJhcmdzIiwiZXZlbnRMaXN0ZW5lcnMiLCJlcnJJbnZhbGlkUGFzc3dvcmREYXRhIiwiZW1haWxSZWdleEV4cCIsInBhc3NSZWdleEV4cCIsIlZhbGlkYXRpb24iLCJlbWFpbCIsIndpdGhSZWdleCIsInZhbGlkYXRlRW1haWxSZWdleCIsInBhc3N3b3JkIiwidmFsaWRhdGVQYXNzUmVnZXgiLCJ0ZXN0IiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJwYXNzIiwiVmlldyIsInRlbXBsYXRlIiwiZ2xvYmFsRXZlbnRCdXMiLCJfcm9vdCIsIl9nbG9iYWxFdmVudEJ1cyIsIl90ZW1wbGF0ZSIsImlzVmlld0Nsb3NlZCIsImlucHV0IiwiZXJyb3IiLCJtc2ciLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJpbnB1dHMiLCJ3YXNmYWlsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaXNFbXB0eUZpZWxkIiwiX2FkZElucHV0RXJyb3IiLCJfcmVtb3ZlSW5wdXRFcnJvciIsInJlbW92ZSIsIm9uUmVuZGVyIiwiX2RhdGEiLCJBVVRIIiwiY2hlY2tBdXRoIiwiY2hlY2tBdXRoUmVzcG9uc2UiLCJzaWduT3V0Iiwic2lnbk91dFJlc3BvbnNlIiwic2lnbkluIiwic2lnbkluU3VjY2VzcyIsInNpZ25JbkZhaWxlZCIsInNpZ25VcEN1c3RvbWVyIiwic2lnblVwU3VjY2VzcyIsInNpZ25VcEZhaWxlZCIsIlBST0ZJTEUiLCJsb2FkUHJvZmlsZSIsImxvYWRQcm9maWxlU3VjY2VzcyIsImxvYWRQcm9maWxlRmFpbGVkIiwic2F2ZUJ1dHRvbkNsaWNrZWQiLCJzYXZlUHJvZmlsZSIsInNhdmVQcm9maWxlU3VjY2VzcyIsInNhdmVQcm9maWxlRmFpbGVkIiwic2F2ZUF2YXRhciIsInNhdmVBdmF0YXJTdWNjZXNzIiwic2F2ZUF2YXRhckZhaWxlZCIsIlBvc3RlclZpZXciLCJldmVudEJ1cyIsInN1YnNjcmliZVRvRXZlbnQiLCJfb25BdXRoUmVzcG9uc2UiLCJ0cmlnZ2VyRXZlbnQiLCJDb250cm9sbGVyIiwicm91dGVyIiwiX3ZpZXciLCJyZW5kZXIiLCJoaWRlIiwiX3JvdXRlciIsIlBvc3RlckNvbnRyb2xsZXIiLCJOZXR3b3JrIiwiZmV0Y2giLCJnZXRTZXJ2ZXJVcmwiLCJtZXRob2QiLCJjcmVkZW50aWFscyIsImJvZHkiLCJob3N0IiwiaGVhZGVycyIsInVybCIsInRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkFwaSIsImRvUG9zdCIsImRvR2V0IiwiZG9EZWxldGUiLCJ1c2VybmFtZSIsImF2YXRhciIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJkb1Bvc3RGb3JtRGF0YSIsImRlc2NyaXB0aW9uIiwiZG9QdXQiLCJ1c2VySUQiLCJmaWxtSUQiLCJwYWdlSUQiLCJnZW5yZXMiLCJkYXRlIiwiYWN0b3JzIiwiZGlyZWN0b3JzIiwicmF0aW5nIiwiYXBpIiwiZ2V0UGFnZUZpbG1zIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiX29uQ2hlY2tBdXRoIiwiYXV0aENoZWNrIiwicmVzIiwiTWVudVZpZXciLCJNZW51Q29udHJvbGxlciIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkZXIiLCJjb250ZW50IiwibW9kZWwiLCJ2YWx1ZXMiLCJmbGF0IiwibW9kZWxzIiwicG9zdGVyIiwiUG9zdGVyTW9kZWwiLCJzZXRHbG9iYWxFdmVudEJ1cyIsIm1lbnVDb250cm9sbGVyIiwicG9zdGVyQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxT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aEI1RCxFQUFPL0kiLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwdWdfaGFzX293bl9wcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogTWVyZ2UgdHdvIGF0dHJpYnV0ZSBvYmplY3RzIGdpdmluZyBwcmVjZWRlbmNlXG4gKiB0byB2YWx1ZXMgaW4gb2JqZWN0IGBiYC4gQ2xhc3NlcyBhcmUgc3BlY2lhbC1jYXNlZFxuICogYWxsb3dpbmcgZm9yIGFycmF5cyBhbmQgbWVyZ2luZy9qb2luaW5nIGFwcHJvcHJpYXRlbHlcbiAqIHJlc3VsdGluZyBpbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm4ge09iamVjdH0gYVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5tZXJnZSA9IHB1Z19tZXJnZTtcbmZ1bmN0aW9uIHB1Z19tZXJnZShhLCBiKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgdmFyIGF0dHJzID0gYVswXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGF0dHJzID0gcHVnX21lcmdlKGF0dHJzLCBhW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoa2V5ID09PSAnY2xhc3MnKSB7XG4gICAgICB2YXIgdmFsQSA9IGFba2V5XSB8fCBbXTtcbiAgICAgIGFba2V5XSA9IChBcnJheS5pc0FycmF5KHZhbEEpID8gdmFsQSA6IFt2YWxBXSkuY29uY2F0KGJba2V5XSB8fCBbXSk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgIHZhciB2YWxBID0gcHVnX3N0eWxlKGFba2V5XSk7XG4gICAgICB2YWxBID0gdmFsQSAmJiB2YWxBW3ZhbEEubGVuZ3RoIC0gMV0gIT09ICc7JyA/IHZhbEEgKyAnOycgOiB2YWxBO1xuICAgICAgdmFyIHZhbEIgPSBwdWdfc3R5bGUoYltrZXldKTtcbiAgICAgIHZhbEIgPSB2YWxCICYmIHZhbEJbdmFsQi5sZW5ndGggLSAxXSAhPT0gJzsnID8gdmFsQiArICc7JyA6IHZhbEI7XG4gICAgICBhW2tleV0gPSB2YWxBICsgdmFsQjtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gYltrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhO1xufTtcblxuLyoqXG4gKiBQcm9jZXNzIGFycmF5LCBvYmplY3QsIG9yIHN0cmluZyBhcyBhIHN0cmluZyBvZiBjbGFzc2VzIGRlbGltaXRlZCBieSBhIHNwYWNlLlxuICpcbiAqIElmIGB2YWxgIGlzIGFuIGFycmF5LCBhbGwgbWVtYmVycyBvZiBpdCBhbmQgaXRzIHN1YmFycmF5cyBhcmUgY291bnRlZCBhc1xuICogY2xhc3Nlcy4gSWYgYGVzY2FwaW5nYCBpcyBhbiBhcnJheSwgdGhlbiB3aGV0aGVyIG9yIG5vdCB0aGUgaXRlbSBpbiBgdmFsYCBpc1xuICogZXNjYXBlZCBkZXBlbmRzIG9uIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gYGVzY2FwaW5nYC4gSWYgYGVzY2FwaW5nYCBpc1xuICogbm90IGFuIGFycmF5LCBubyBlc2NhcGluZyBpcyBkb25lLlxuICpcbiAqIElmIGB2YWxgIGlzIGFuIG9iamVjdCwgYWxsIHRoZSBrZXlzIHdob3NlIHZhbHVlIGlzIHRydXRoeSBhcmUgY291bnRlZCBhc1xuICogY2xhc3Nlcy4gTm8gZXNjYXBpbmcgaXMgZG9uZS5cbiAqXG4gKiBJZiBgdmFsYCBpcyBhIHN0cmluZywgaXQgaXMgY291bnRlZCBhcyBhIGNsYXNzLiBObyBlc2NhcGluZyBpcyBkb25lLlxuICpcbiAqIEBwYXJhbSB7KEFycmF5LjxzdHJpbmc+fE9iamVjdC48c3RyaW5nLCBib29sZWFuPnxzdHJpbmcpfSB2YWxcbiAqIEBwYXJhbSB7P0FycmF5LjxzdHJpbmc+fSBlc2NhcGluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmNsYXNzZXMgPSBwdWdfY2xhc3NlcztcbmZ1bmN0aW9uIHB1Z19jbGFzc2VzX2FycmF5KHZhbCwgZXNjYXBpbmcpIHtcbiAgdmFyIGNsYXNzU3RyaW5nID0gJycsIGNsYXNzTmFtZSwgcGFkZGluZyA9ICcnLCBlc2NhcGVFbmFibGVkID0gQXJyYXkuaXNBcnJheShlc2NhcGluZyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgY2xhc3NOYW1lID0gcHVnX2NsYXNzZXModmFsW2ldKTtcbiAgICBpZiAoIWNsYXNzTmFtZSkgY29udGludWU7XG4gICAgZXNjYXBlRW5hYmxlZCAmJiBlc2NhcGluZ1tpXSAmJiAoY2xhc3NOYW1lID0gcHVnX2VzY2FwZShjbGFzc05hbWUpKTtcbiAgICBjbGFzc1N0cmluZyA9IGNsYXNzU3RyaW5nICsgcGFkZGluZyArIGNsYXNzTmFtZTtcbiAgICBwYWRkaW5nID0gJyAnO1xuICB9XG4gIHJldHVybiBjbGFzc1N0cmluZztcbn1cbmZ1bmN0aW9uIHB1Z19jbGFzc2VzX29iamVjdCh2YWwpIHtcbiAgdmFyIGNsYXNzU3RyaW5nID0gJycsIHBhZGRpbmcgPSAnJztcbiAgZm9yICh2YXIga2V5IGluIHZhbCkge1xuICAgIGlmIChrZXkgJiYgdmFsW2tleV0gJiYgcHVnX2hhc19vd25fcHJvcGVydHkuY2FsbCh2YWwsIGtleSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gY2xhc3NTdHJpbmcgKyBwYWRkaW5nICsga2V5O1xuICAgICAgcGFkZGluZyA9ICcgJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNsYXNzU3RyaW5nO1xufVxuZnVuY3Rpb24gcHVnX2NsYXNzZXModmFsLCBlc2NhcGluZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgcmV0dXJuIHB1Z19jbGFzc2VzX2FycmF5KHZhbCwgZXNjYXBpbmcpO1xuICB9IGVsc2UgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBwdWdfY2xhc3Nlc19vYmplY3QodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsIHx8ICcnO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBvYmplY3Qgb3Igc3RyaW5nIHRvIGEgc3RyaW5nIG9mIENTUyBzdHlsZXMgZGVsaW1pdGVkIGJ5IGEgc2VtaWNvbG9uLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdC48c3RyaW5nLCBzdHJpbmc+fHN0cmluZyl9IHZhbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmV4cG9ydHMuc3R5bGUgPSBwdWdfc3R5bGU7XG5mdW5jdGlvbiBwdWdfc3R5bGUodmFsKSB7XG4gIGlmICghdmFsKSByZXR1cm4gJyc7XG4gIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBvdXQgPSAnJztcbiAgICBmb3IgKHZhciBzdHlsZSBpbiB2YWwpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICBpZiAocHVnX2hhc19vd25fcHJvcGVydHkuY2FsbCh2YWwsIHN0eWxlKSkge1xuICAgICAgICBvdXQgPSBvdXQgKyBzdHlsZSArICc6JyArIHZhbFtzdHlsZV0gKyAnOyc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbCArICcnO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZXNjYXBlZFxuICogQHBhcmFtIHtCb29sZWFufSB0ZXJzZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHIgPSBwdWdfYXR0cjtcbmZ1bmN0aW9uIHB1Z19hdHRyKGtleSwgdmFsLCBlc2NhcGVkLCB0ZXJzZSkge1xuICBpZiAodmFsID09PSBmYWxzZSB8fCB2YWwgPT0gbnVsbCB8fCAhdmFsICYmIChrZXkgPT09ICdjbGFzcycgfHwga2V5ID09PSAnc3R5bGUnKSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgcmV0dXJuICcgJyArICh0ZXJzZSA/IGtleSA6IGtleSArICc9XCInICsga2V5ICsgJ1wiJyk7XG4gIH1cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAoKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpICYmIHR5cGVvZiB2YWwudG9KU09OID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFsID0gdmFsLnRvSlNPTigpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEpTT04uc3RyaW5naWZ5KHZhbCk7XG4gICAgaWYgKCFlc2NhcGVkICYmIHZhbC5pbmRleE9mKCdcIicpICE9PSAtMSkge1xuICAgICAgcmV0dXJuICcgJyArIGtleSArICc9XFwnJyArIHZhbC5yZXBsYWNlKC8nL2csICcmIzM5OycpICsgJ1xcJyc7XG4gICAgfVxuICB9XG4gIGlmIChlc2NhcGVkKSB2YWwgPSBwdWdfZXNjYXBlKHZhbCk7XG4gIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIic7XG59O1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gYXR0cmlidXRlcyBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtPYmplY3R9IHRlcnNlIHdoZXRoZXIgdG8gdXNlIEhUTUw1IHRlcnNlIGJvb2xlYW4gYXR0cmlidXRlc1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHJzID0gcHVnX2F0dHJzO1xuZnVuY3Rpb24gcHVnX2F0dHJzKG9iaiwgdGVyc2Upe1xuICB2YXIgYXR0cnMgPSAnJztcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKHB1Z19oYXNfb3duX3Byb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICB2YXIgdmFsID0gb2JqW2tleV07XG5cbiAgICAgIGlmICgnY2xhc3MnID09PSBrZXkpIHtcbiAgICAgICAgdmFsID0gcHVnX2NsYXNzZXModmFsKTtcbiAgICAgICAgYXR0cnMgPSBwdWdfYXR0cihrZXksIHZhbCwgZmFsc2UsIHRlcnNlKSArIGF0dHJzO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICgnc3R5bGUnID09PSBrZXkpIHtcbiAgICAgICAgdmFsID0gcHVnX3N0eWxlKHZhbCk7XG4gICAgICB9XG4gICAgICBhdHRycyArPSBwdWdfYXR0cihrZXksIHZhbCwgZmFsc2UsIHRlcnNlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXR0cnM7XG59O1xuXG4vKipcbiAqIEVzY2FwZSB0aGUgZ2l2ZW4gc3RyaW5nIG9mIGBodG1sYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIHB1Z19tYXRjaF9odG1sID0gL1tcIiY8Pl0vO1xuZXhwb3J0cy5lc2NhcGUgPSBwdWdfZXNjYXBlO1xuZnVuY3Rpb24gcHVnX2VzY2FwZShfaHRtbCl7XG4gIHZhciBodG1sID0gJycgKyBfaHRtbDtcbiAgdmFyIHJlZ2V4UmVzdWx0ID0gcHVnX21hdGNoX2h0bWwuZXhlYyhodG1sKTtcbiAgaWYgKCFyZWdleFJlc3VsdCkgcmV0dXJuIF9odG1sO1xuXG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGksIGxhc3RJbmRleCwgZXNjYXBlO1xuICBmb3IgKGkgPSByZWdleFJlc3VsdC5pbmRleCwgbGFzdEluZGV4ID0gMDsgaSA8IGh0bWwubGVuZ3RoOyBpKyspIHtcbiAgICBzd2l0Y2ggKGh0bWwuY2hhckNvZGVBdChpKSkge1xuICAgICAgY2FzZSAzNDogZXNjYXBlID0gJyZxdW90Oyc7IGJyZWFrO1xuICAgICAgY2FzZSAzODogZXNjYXBlID0gJyZhbXA7JzsgYnJlYWs7XG4gICAgICBjYXNlIDYwOiBlc2NhcGUgPSAnJmx0Oyc7IGJyZWFrO1xuICAgICAgY2FzZSA2MjogZXNjYXBlID0gJyZndDsnOyBicmVhaztcbiAgICAgIGRlZmF1bHQ6IGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAobGFzdEluZGV4ICE9PSBpKSByZXN1bHQgKz0gaHRtbC5zdWJzdHJpbmcobGFzdEluZGV4LCBpKTtcbiAgICBsYXN0SW5kZXggPSBpICsgMTtcbiAgICByZXN1bHQgKz0gZXNjYXBlO1xuICB9XG4gIGlmIChsYXN0SW5kZXggIT09IGkpIHJldHVybiByZXN1bHQgKyBodG1sLnN1YnN0cmluZyhsYXN0SW5kZXgsIGkpO1xuICBlbHNlIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJlLXRocm93IHRoZSBnaXZlbiBgZXJyYCBpbiBjb250ZXh0IHRvIHRoZVxuICogdGhlIHB1ZyBpbiBgZmlsZW5hbWVgIGF0IHRoZSBnaXZlbiBgbGluZW5vYC5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IGxpbmVub1xuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBvcmlnaW5hbCBzb3VyY2VcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMucmV0aHJvdyA9IHB1Z19yZXRocm93O1xuZnVuY3Rpb24gcHVnX3JldGhyb3coZXJyLCBmaWxlbmFtZSwgbGluZW5vLCBzdHIpe1xuICBpZiAoIShlcnIgaW5zdGFuY2VvZiBFcnJvcikpIHRocm93IGVycjtcbiAgaWYgKCh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnIHx8ICFmaWxlbmFtZSkgJiYgIXN0cikge1xuICAgIGVyci5tZXNzYWdlICs9ICcgb24gbGluZSAnICsgbGluZW5vO1xuICAgIHRocm93IGVycjtcbiAgfVxuICB0cnkge1xuICAgIHN0ciA9IHN0ciB8fCByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0ZjgnKVxuICB9IGNhdGNoIChleCkge1xuICAgIHB1Z19yZXRocm93KGVyciwgbnVsbCwgbGluZW5vKVxuICB9XG4gIHZhciBjb250ZXh0ID0gM1xuICAgICwgbGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpXG4gICAgLCBzdGFydCA9IE1hdGgubWF4KGxpbmVubyAtIGNvbnRleHQsIDApXG4gICAgLCBlbmQgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIGxpbmVubyArIGNvbnRleHQpO1xuXG4gIC8vIEVycm9yIGNvbnRleHRcbiAgdmFyIGNvbnRleHQgPSBsaW5lcy5zbGljZShzdGFydCwgZW5kKS5tYXAoZnVuY3Rpb24obGluZSwgaSl7XG4gICAgdmFyIGN1cnIgPSBpICsgc3RhcnQgKyAxO1xuICAgIHJldHVybiAoY3VyciA9PSBsaW5lbm8gPyAnICA+ICcgOiAnICAgICcpXG4gICAgICArIGN1cnJcbiAgICAgICsgJ3wgJ1xuICAgICAgKyBsaW5lO1xuICB9KS5qb2luKCdcXG4nKTtcblxuICAvLyBBbHRlciBleGNlcHRpb24gbWVzc2FnZVxuICBlcnIucGF0aCA9IGZpbGVuYW1lO1xuICBlcnIubWVzc2FnZSA9IChmaWxlbmFtZSB8fCAnUHVnJykgKyAnOicgKyBsaW5lbm9cbiAgICArICdcXG4nICsgY29udGV4dCArICdcXG5cXG4nICsgZXJyLm1lc3NhZ2U7XG4gIHRocm93IGVycjtcbn07XG4iLCJ2YXIgcHVnID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcHVnLXJ1bnRpbWUvaW5kZXguanNcIik7XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge3ZhciBwdWdfaHRtbCA9IFwiXCIsIHB1Z19taXhpbnMgPSB7fSwgcHVnX2ludGVycDtwdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDc3R5bGVcXHUwMDNFLmNvbnRhaW5lcntcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1ZDJkMmU7XFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiZGF0YTppbWFnZVxcdTAwMkZzdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDpcXHUwMDJGXFx1MDAyRnd3dy53My5vcmdcXHUwMDJGMjAwMFxcdTAwMkZzdmcnIHdpZHRoPScxMjAnIGhlaWdodD0nMTIwJyB2aWV3Qm94PScwIDAgMTIwIDEyMCclM0UlM0Nwb2x5Z29uIGZpbGw9JyUyM2I4Njk2OScgZmlsbC1vcGFjaXR5PScuMScgcG9pbnRzPScxMjAgMCAxMjAgNjAgOTAgMzAgNjAgMCAwIDAgMCAwIDYwIDYwIDAgMTIwIDYwIDEyMCA5MCA5MCAxMjAgNjAgMTIwIDAnXFx1MDAyRiUzRSUzQ1xcdTAwMkZzdmclM0VcXFwiKTtcXG4gICAgcGFkZGluZzogMTVweDtcXG59XFxuXFxuaDEge1xcbiAgICBmb250LWZhbWlseTogQ2FtYnJpYSwgQ29jaGluLCBHZW9yZ2lhLCBUaW1lcywgJ1RpbWVzIE5ldyBSb21hbicsIHNlcmlmO1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIG1hcmdpbi1ib3R0b206IDUwcHg7XFxufVxcblxcbi5jYXJkLWl0ZW17XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGFsaWNlYmx1ZTtcXG4gICAgd2lkdGg6IDM2MHB4O1xcbiAgICBoZWlnaHQ6IDM2MHB4O1xcbn1cXG4uY2FyZCB7XFxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBmb250LWZhbWlseTogYXJpYWw7XFxuICAgIG1heC13aWR0aDogMzgwcHg7XFxuICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7XFxuICAgIFxcdTAwMkYqLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOzsqXFx1MDAyRlxcbiAgICBcXHUwMDJGKi1tb3otdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTs7KlxcdTAwMkZcXG4gICAgXFx1MDAyRiotby10cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOzsqXFx1MDAyRlxcbiAgICBcXHUwMDJGKnRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7KlxcdTAwMkZcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2M3ZWNlZTtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxMHB4IDEwcHg7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG59XFxuXFxuXFx1MDAyRiouY2FyZDpob3ZlciB7KlxcdTAwMkZcXG5cXHUwMDJGKiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4yKTsqXFx1MDAyRlxcblxcdTAwMkYqICAgIC1tcy10cmFuc2Zvcm06IHNjYWxlKDEuMik7KlxcdTAwMkZcXG5cXHUwMDJGKiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMik7KlxcdTAwMkZcXG5cXHUwMDJGKn0qXFx1MDAyRlxcblxcbi5wcmljZSB7XFxuICAgIGNvbG9yOiBncmV5O1xcbiAgICBmb250LXNpemU6IDIycHg7XFxufVxcblxcbi5jYXJkIGJ1dHRvbiB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGJvcmRlcjogbm9uZTtcXG4gICAgb3V0bGluZTogMDtcXG4gICAgcGFkZGluZzogMTJweDtcXG4gICAgY29sb3I6IHdoaXRlO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyZjNlO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGZvbnQtc2l6ZTogMThweDtcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG59XFxuXFxuLmNhcmQgYnV0dG9uOmhvdmVyIHtcXG4gICAgb3BhY2l0eTogMC43O1xcbn1cXG5cXG4uY2FyZC1kZWNrIHtcXG4gICAgXFx1MDAyRiogbWF4LWhlaWdodDogNTUwcHg7ICpcXHUwMDJGXFxuICAgIHBhZGRpbmc6IDEwcHg7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcblxcbi5jYXJkIHtcXG4gICAgbWFyZ2luOiAxMHB4O1xcbn1cXG5cXG5oMXtcXG4gICAgbWFyZ2luLWJvdHRvbTogYXV0bztcXG59XFxuXFxuLmNhcmQtaXRlbS1ibHVyIHtcXG4gICAgYWxpZ24tc2VsZjogZW5kO1xcbiAgICBoZWlnaHQ6IDEyMHB4O1xcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDEsMCwwLDAuNik7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgd2lkdGg6IDM2MHB4O1xcbiAgICBjb2xvcjogI2RmZjlmYjtcXG59XFxuXFxuLmNhcmQtaXRlbS1ibHVyOmhvdmVyIHtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbmh0bWwge1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxufVxcblxcblxcblxcbi5ib2R5IHtcXG4gICAgXFx1MDAyRiogZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBqdXN0aWZ5LWl0ZW1zOiBjZW50ZXI7XFxuICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcXG4gICAgcGFkZGluZzogMTBweDsgKlxcdTAwMkZcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuYSB7XFxuICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybTtcXG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMC4xcztcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG5hOmhvdmVyIHtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxLjI1KTtcXG59XFxuXFxuYTphY3RpdmUge1xcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMjUpIHRyYW5zbGF0ZVkoLTJweCk7XFxufVxcdTAwM0NcXHUwMDJGc3R5bGVcXHUwMDNFXCI7XG52YXIgdGl0bGUgPSBcIkpva2VyXCJcbnZhciBocmVmID1cImh0dHBzOi8vc3RhdGljLmthcm9maWxtLnJ1L3VwbG9hZHMvZmlsbS9kZXNrdG9wL2UzL2I2LzRiLzUyMTVkNTgxMWI4MDI5ODE3MmRhZDczZmQxLmpwZ1wiXG52YXIgZmlsbVVybD1cIi9maWxtXCJcbnB1Z19taXhpbnNbXCJjYXJkLWRlY2tcIl0gPSBwdWdfaW50ZXJwID0gZnVuY3Rpb24odGl0bGUsIGhyZWYsIGZpbG1Vcmwpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ2RpdiBjbGFzcz1cXFwiY2FyZFxcXCJcXHUwMDNFXFx1MDAzQ2RpdiBjbGFzcz1cXFwiY2FyZC1pdGVtXFxcIlxcdTAwM0VcXHUwMDNDaW1nXCIgKyAocHVnLmF0dHIoXCJzcmNcIiwgaHJlZiwgdHJ1ZSwgdHJ1ZSkpICsgXCJcXHUwMDNFXFx1MDAzQ1xcdTAwMkZkaXZcXHUwMDNFXFx1MDAzQ2RpdlwiICsgKFwiIGNsYXNzPVxcXCJjYXJkLWl0ZW0tYmx1clxcXCJcIitwdWcuYXR0cihcInNyY1wiLCBocmVmLCB0cnVlLCB0cnVlKSkgKyBcIlxcdTAwM0VcXHUwMDNDaDFcXHUwMDNFXCIgKyAocHVnLmVzY2FwZShudWxsID09IChwdWdfaW50ZXJwID0gdGl0bGUpID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZoMVxcdTAwM0VcXHUwMDNDYVwiICsgKHB1Zy5hdHRyKFwib25jbGlja1wiLCBmaWxtVXJsLCB0cnVlLCB0cnVlKStwdWcuYXR0cihcImhyZWZcIiwgZmlsbVVybCwgdHJ1ZSwgdHJ1ZSkrXCIgZGF0YS1zZWN0aW9uPVxcXCJmaWxtXFxcIlwiKSArIFwiXFx1MDAzRdCf0L7QtNGA0L7QsdC90LXQtVxcdTAwM0NcXHUwMDJGYVxcdTAwM0VcXHUwMDNDXFx1MDAyRmRpdlxcdTAwM0VcXHUwMDNDXFx1MDAyRmRpdlxcdTAwM0VcIjtcbn07XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDZGl2IGNsYXNzPVxcXCJjb250YWluZXJcXFwiXFx1MDAzRVxcdTAwM0NoMVxcdTAwM0XQpNC40LvRjNC80YtcXHUwMDNDXFx1MDAyRmgxXFx1MDAzRVxcdTAwM0NkaXYgY2xhc3M9XFxcImJvZHlcXFwiXFx1MDAzRVwiO1xudmFyIGRlY2tzID0gMztcbndoaWxlIChkZWNrcyA+IDApIHtcbi8vIGl0ZXJhdGUgWzEsMiwzLDRdXG47KGZ1bmN0aW9uKCl7XG4gIHZhciAkJG9iaiA9IFsxLDIsMyw0XTtcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIHB1Z19pbmRleDAgPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7IHB1Z19pbmRleDAgPCAkJGw7IHB1Z19pbmRleDArKykge1xuICAgICAgICB2YXIgdmFsID0gJCRvYmpbcHVnX2luZGV4MF07XG5wdWdfbWl4aW5zW1wiY2FyZC1kZWNrXCJdKHRpdGxlLCBocmVmKTtcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgJCRsID0gMDtcbiAgICBmb3IgKHZhciBwdWdfaW5kZXgwIGluICQkb2JqKSB7XG4gICAgICAkJGwrKztcbiAgICAgIHZhciB2YWwgPSAkJG9ialtwdWdfaW5kZXgwXTtcbnB1Z19taXhpbnNbXCJjYXJkLWRlY2tcIl0odGl0bGUsIGhyZWYpO1xuICAgIH1cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuZGVja3MtLVxufVxucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ1xcdTAwMkZkaXZcXHUwMDNFXFx1MDAzQ1xcdTAwMkZkaXZcXHUwMDNFXCI7O3JldHVybiBwdWdfaHRtbDt9O1xubW9kdWxlLmV4cG9ydHMgPSB0ZW1wbGF0ZTsiLCJ2YXIgcHVnID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcHVnLXJ1bnRpbWUvaW5kZXguanNcIik7XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge3ZhciBwdWdfaHRtbCA9IFwiXCIsIHB1Z19taXhpbnMgPSB7fSwgcHVnX2ludGVycDs7dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoUmVnRXhwLCBkb2N1bWVudCwgdW5lc2NhcGUpIHtwdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDc3R5bGVcXHUwMDNFLm1lbnUge1xcbiAgICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XFxuICAgIG1hcmdpbjogMDtcXG4gICAgcGFkZGluZzogMDtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuXFxuLm1lbnUtZWwtcmlnaHQge1xcbiAgICBmbG9hdDogcmlnaHQ7XFxufVxcblxcbi5tZW51LWVsLWxlZnQge1xcbiAgICBmbG9hdDogbGVmdDtcXG59XFxuXFxuLmlubmVyLW1lbnUtZWxlbWVudCB7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIGZvbnQtZmFtaWx5OiBDYW1icmlhLCBDb2NoaW4sIEdlb3JnaWEsIFRpbWVzLCAnVGltZXMgTmV3IFJvbWFuJywgc2VyaWY7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgcGFkZGluZzogMTRweCAxNnB4O1xcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICAgIHdpZHRoOiA5MHB4O1xcbiAgICB0cmFuc2l0aW9uLXByb3BlcnR5OiB0cmFuc2Zvcm07XFxuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDAuMjVzO1xcbn1cXG5cXG4uaW5uZXItbWVudS1lbGVtZW50OmhvdmVyIHtcXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xcbn1cXG5cXG4uaW5uZXItbWVudS1lbGVtZW50OmFjdGl2ZSB7XFxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KSBzY2FsZSgxLjMzKTtcXG59XFx1MDAzQ1xcdTAwMkZzdHlsZVxcdTAwM0VcIjtcbnB1Z19taXhpbnNbXCJpdGVtLXJpZ2h0XCJdID0gcHVnX2ludGVycCA9IGZ1bmN0aW9uKHRpdGxlLCBocmVmLCBzZWN0aW9uKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NsaSBjbGFzcz1cXFwibWVudS1lbC1yaWdodFxcXCJcXHUwMDNFXFx1MDAzQ2FcIiArIChcIiBjbGFzcz1cXFwiaW5uZXItbWVudS1lbGVtZW50XFxcIlwiK3B1Zy5hdHRyKFwiaHJlZlwiLCBocmVmLCB0cnVlLCB0cnVlKStwdWcuYXR0cihcImRhdGEtc2VjdGlvblwiLCBzZWN0aW9uLCB0cnVlLCB0cnVlKSkgKyBcIlxcdTAwM0VcIiArIChwdWcuZXNjYXBlKG51bGwgPT0gKHB1Z19pbnRlcnAgPSB0aXRsZSkgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRmFcXHUwMDNFXFx1MDAzQ1xcdTAwMkZsaVxcdTAwM0VcIjtcbn07XG5wdWdfbWl4aW5zW1wiaXRlbS1sZWZ0XCJdID0gcHVnX2ludGVycCA9IGZ1bmN0aW9uKHRpdGxlLCBocmVmLCBzZWN0aW9uKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NsaSBjbGFzcz1cXFwibWVudS1lbC1sZWZ0XFxcIlxcdTAwM0VcXHUwMDNDYVwiICsgKFwiIGNsYXNzPVxcXCJpbm5lci1tZW51LWVsZW1lbnRcXFwiXCIrcHVnLmF0dHIoXCJocmVmXCIsIGhyZWYsIHRydWUsIHRydWUpK3B1Zy5hdHRyKFwiZGF0YS1zZWN0aW9uXCIsIHNlY3Rpb24sIHRydWUsIHRydWUpKSArIFwiXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IHRpdGxlKSA/IFwiXCIgOiBwdWdfaW50ZXJwKSkgKyBcIlxcdTAwM0NcXHUwMDJGYVxcdTAwM0VcXHUwMDNDXFx1MDAyRmxpXFx1MDAzRVwiO1xufTtcbmNvbnN0IGdldENvb2tpZSA9IChuYW1lKSA9PiB7dmFyIHJlID0gbmV3IFJlZ0V4cChuYW1lICsgXCI9KFteO10rKVwiKTsgdmFyIHZhbHVlID0gcmUuZXhlYyhkb2N1bWVudC5jb29raWUpOyByZXR1cm4gKHZhbHVlICE9IG51bGwpID8gdW5lc2NhcGUodmFsdWVbMV0pIDogbnVsbDt9XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDdWwgY2xhc3M9XFxcIm1lbnVcXFwiXFx1MDAzRVwiO1xucHVnX21peGluc1tcIml0ZW0tbGVmdFwiXSgn0JDRhNC40YjQsCcsICcvcG9zdGVyJywgJ3Bvc3RlcicpO1xucHVnX21peGluc1tcIml0ZW0tbGVmdFwiXSgn0J4g0L3QsNGBJywgJy9hYm91dCcsICdhYm91dCcpO1xuaWYgKGdldENvb2tpZSgnaWQnKSAhPSBudWxsKSB7XG5wdWdfbWl4aW5zW1wiaXRlbS1yaWdodFwiXSgn0JLRi9GF0L7QtCcsICcvc2lnbm91dCcsICdzaWdub3V0Jyk7XG5wdWdfbWl4aW5zW1wiaXRlbS1yaWdodFwiXSgn0J/RgNC+0YTQuNC70YwnLCAnL3Byb2ZpbGUnLCAncHJvZmlsZScpO1xufVxuZWxzZSB7XG5wdWdfbWl4aW5zW1wiaXRlbS1yaWdodFwiXSgn0KDQtdCz0LjRgdGC0YDQsNGG0LjRjycsICcvc2lnbnVwJywgJ3NpZ251cCcpO1xucHVnX21peGluc1tcIml0ZW0tcmlnaHRcIl0oJ9CS0YXQvtC0JywgJy9zaWduaW4nLCAnc2lnbmluJyk7XG59XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDXFx1MDAyRnVsXFx1MDAzRVwiO30uY2FsbCh0aGlzLFwiUmVnRXhwXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5SZWdFeHA6dHlwZW9mIFJlZ0V4cCE9PVwidW5kZWZpbmVkXCI/UmVnRXhwOnVuZGVmaW5lZCxcImRvY3VtZW50XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kb2N1bWVudDp0eXBlb2YgZG9jdW1lbnQhPT1cInVuZGVmaW5lZFwiP2RvY3VtZW50OnVuZGVmaW5lZCxcInVuZXNjYXBlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC51bmVzY2FwZTp0eXBlb2YgdW5lc2NhcGUhPT1cInVuZGVmaW5lZFwiP3VuZXNjYXBlOnVuZGVmaW5lZCkpOztyZXR1cm4gcHVnX2h0bWw7fTtcbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGU7IiwiY29uc3QgcGF0aHNXaXRoSWQgPSBbXG4gICAgJy9wcm9maWxlJyxcbiAgICAnL3Bvc3RlcicsXG4gICAgJy9maWxtJ1xuXTtcblxuZXhwb3J0IGNsYXNzIFJvdXRlciB7XG4gICAgY29uc3RydWN0b3IgKHJvb3QpIHtcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgPSBudWxsO1xuXG4gICAgICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gXyA9PiB7XG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZSh7IHBhdGg6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgYWRkVG9IaXN0b3J5OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvIHBhdGggd2l0aCBkYXRhXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIHJlZGlyZWN0IChwYXRoLCBkYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy5yb3V0ZSh7IHBhdGgsIGRhdGEsIGFkZFRvSGlzdG9yeTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgY29udHJvbGxlciB0byBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge0NvbnRyb2xsZXJ9IGNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBhZGQgKHBhdGgsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXMuc2V0KHBhdGgsIGNvbnRyb2xsZXIpO1xuICAgIH1cblxuICAgIHJvdXRlICh7IHBhdGgsIGRhdGEgPSB7fSwgYWRkVG9IaXN0b3J5ID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRyb2xsZXIgPSB0aGlzLnJvdXRlcy5nZXQodGhpcy5fZ2V0Um91dGVQYXRoKHRoaXMuY3VycmVudFJvdXRlKSk7XG4gICAgICAgIGlmIChjdXJyZW50Q29udHJvbGxlcikge1xuICAgICAgICAgICAgY3VycmVudENvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZGRUb0hpc3RvcnkpIHtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBwYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGhXaXRob3V0UGFyYW1ldGVycyA9IHBhdGguc3BsaXQoJz8nKVswXTtcbiAgICAgICAgY29uc29sZS5sb2cocGF0aFdpdGhvdXRQYXJhbWV0ZXJzKTtcbiAgICAgICAgY29uc3Qgcm91dGVQYXRoID0gdGhpcy5fZ2V0Um91dGVQYXRoKHBhdGhXaXRob3V0UGFyYW1ldGVycyk7XG5cbiAgICAgICAgaWYgKHRoaXMucm91dGVzLmhhcyhyb3V0ZVBhdGgpKSB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5yb3V0ZXMuZ2V0KHJvdXRlUGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChwYXRoc1dpdGhJZC5maW5kKGVsID0+IGVsID09PSByb3V0ZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkID0gdGhpcy5fZXh0cmFjdElkRnJvbVBhdGgocGF0aCk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHsgaWQsIC4uLmRhdGEgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb3V0ZXItPiByZW5kZXIoZGF0YSknLCBkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gcGF0aDtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIub3BlbldpdGhEYXRhKGRhdGEpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yb3V0ZXMuaGFzKHBhdGhXaXRob3V0UGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5yb3V0ZXMuZ2V0KHBhdGhXaXRob3V0UGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvdXRlci0+IHJlbmRlcihkYXRhKScsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gcGF0aDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLm9wZW5XaXRoRGF0YShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vRXJyb3IgNDA0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3V0ZVxuICAgICAqIEBwYXJhbSBwYXRoV2l0aG91dFBhcmFtZXRlcnNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldFJvdXRlUGF0aCAocGF0aFdpdGhvdXRQYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmIChwYXRoV2l0aG91dFBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiAnLycgKyBwYXRoV2l0aG91dFBhcmFtZXRlcnMuc3BsaXQoJy8nKVsxXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBfbm9ybWFsaXplUGF0aCAocGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nICYmIHBhdGggIT09ICcvJyA/IHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKSA6IHBhdGg7XG4gICAgfVxuXG4gICAgc3RhcnQgKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcbiAgICAgICAgICAgIGlmIChldi50YXJnZXQudGFnTmFtZSA9PT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlKHsgcGF0aDogUm91dGVyLl9ub3JtYWxpemVQYXRoKGV2LnRhcmdldC5wYXRobmFtZSksIGFkZFRvSGlzdG9yeTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5yb3V0ZSh7IHBhdGg6IFJvdXRlci5fbm9ybWFsaXplUGF0aCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpLCBhZGRUb0hpc3Rvcnk6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgX2V4dHJhY3RJZEZyb21QYXRoIChwYXRoKSB7XG4gICAgICAgIHJldHVybiBwYXRoLnNwbGl0KCcvJykucG9wKCk7XG4gICAgfVxufSIsIi8qKlxuICogRXZlbnRzIGNyZWF0aW9uXG4gKiBAY2xhc3NcbiAqIEB0eXBlIHtFdmVudEJ1c31cbiAqL1xuXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBsaXN0T2ZFdmVudHMgQXJyYXlbc3RyaW5nXSBhdmFpbGFibGUgZXZlbnRzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IgKGxpc3RPZkV2ZW50cz1be31dKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IE1hcCgpO1xuICAgICAgICBsaXN0T2ZFdmVudHMuZm9yRWFjaCgoZXZlbnROYW1lKSA9PlxuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2V0KGV2ZW50TmFtZSwgW10pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaXB0aW9uIHRvIGV2ZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgc3Vic2NyaWJlVG9FdmVudCAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV2ZW50QnVzOiBVbmtub3duIGV2ZW50ICR7ZXZlbnROYW1lfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ldmVudHMuZ2V0KGV2ZW50TmFtZSkucHVzaChjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBhbGwgY2FsbGJhY2tzIGZvciBldmVudHNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFyZ3NcbiAgICAgKi9cblxuICAgIHRyaWdnZXJFdmVudCAoZXZlbnROYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXZlbnRCdXM6IFVua25vd24gZXZlbnQgJHtldmVudE5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50cy5nZXQoZXZlbnROYW1lKTtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgoY2FsbGJhY2spID0+XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgZnVuYyBieSBldmVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYXJnc1xuICAgICAqIEByZXR1cm4geyp9XG4gICAgICovXG4gICAgZGlzcGF0Y2hFdmVudChldmVudE5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gZXZlbnQgdmFsdWUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tldmVudE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzdWNoIGV2ZW50OiAnICsgZXZlbnROYW1lKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50c1tldmVudE5hbWVdKC4uLmFyZ3MpO1xuICAgIH1cbn0iLCJjb25zdCBlcnJFbWFpbElzSW52YWxpZCA9ICdJbnZhbGlkIGVtYWlsJztcbmNvbnN0IGVyckludmFsaWRQYXNzd29yZERhdGEgPVxuICAgICdQYXNzd29yZCBtdXN0IGhhdmU6IDggc3ltYm9scywgMSBudW1lcmFsLCAxIHVwcGVyIGNhc2UgbGV0dGVyIGFuZCAxIGxvd2VyY2FzZS4nO1xuY29uc3QgZW1haWxSZWdleEV4cCA9IC9bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vO1xuY29uc3QgcGFzc1JlZ2V4RXhwID0gL14oPz0uKlxcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89Lns4LH0pLztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWRhdGlvbiB7XG4gICAgLyoqXG4gICAgICog0JLQsNC70LjQtNC40YDRg9C10YIgZW1haWwuXG4gICAgICogQHBhcmFtIGVtYWlsXG4gICAgICogQHBhcmFtIHdpdGhSZWdleCAtIGZsYWdcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSAgaWYgbm90IHZhbGlkID0+IGZhbHNlLlxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZUVtYWlsKGVtYWlsLCB3aXRoUmVnZXggPSBmYWxzZSkge1xuICAgICAgICBpZiAoIWVtYWlsIHx8ICh3aXRoUmVnZXggJiYgIVZhbGlkYXRpb24udmFsaWRhdGVFbWFpbFJlZ2V4KGVtYWlsKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJFbWFpbElzSW52YWxpZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqINCS0LDQu9C40LTQuNGA0YPQtdGCINC/0LDRgNC+0LvRjC5cbiAgICAgKiBAcGFyYW0gcGFzc3dvcmRcbiAgICAgKiBAcGFyYW0gd2l0aFJlZ2V4IC0gZmxhZyAo0LXRgdC70LggdHJ1ZSAtINGC0L4g0L/QsNGA0L7Qu9GMINC/0YDQvtCy0LXRgNGP0LXRgtGB0Y8gUmVnZXgg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjClcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSDQtdGB0LvQuCDQvdC1INCy0LDQu9C40LTQvdGL0Lkg0L/QsNGA0L7Qu9GMLCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtGI0LjQsdC60YMuXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQsIHdpdGhSZWdleCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghcGFzc3dvcmQgfHwgKHdpdGhSZWdleCAmJiAhVmFsaWRhdGlvbi52YWxpZGF0ZVBhc3NSZWdleChwYXNzd29yZCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJySW52YWxpZFBhc3N3b3JkRGF0YTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGVtYWlsLlxuICAgICAqIEBwYXJhbSBlbWFpbFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZUVtYWlsUmVnZXgoZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIGVtYWlsUmVnZXhFeHAudGVzdChTdHJpbmcoZW1haWwpLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIHBhc3N3b3JkIG11c3QgaGF2ZTogOCBzeW1ib2xzLCAxIG51bWVyYWwsIDEgdXBwZXIgY2FzZSBsZXR0ZXIgYW5kIDEgbG93ZXJjYXNlLlxuICAgICAqIEBwYXJhbSBwYXNzXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlUGFzc1JlZ2V4KHBhc3MpIHtcbiAgICAgICAgcmV0dXJuIHBhc3NSZWdleEV4cC50ZXN0KFN0cmluZyhwYXNzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1wdHkgY2hlY2suXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgc3RhdGljIGlzRW1wdHlGaWVsZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09ICcnO1xuICAgIH1cbn0iLCJpbXBvcnQgVmFsaWRhdGlvbiBmcm9tICcuLi9tb2R1bGVzL3ZhbGlkYXRlJztcblxuZXhwb3J0IGNsYXNzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yIChyb290LCB0ZW1wbGF0ZSwgZ2xvYmFsRXZlbnRCdXMpIHtcbiAgICAgICAgdGhpcy5fcm9vdCA9IHJvb3Q7XG4gICAgICAgIHRoaXMuX2dsb2JhbEV2ZW50QnVzID0gZ2xvYmFsRXZlbnRCdXM7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuaXNWaWV3Q2xvc2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2FkZElucHV0RXJyb3IgKGlucHV0LCBlcnJvciwgbXNnID0gJycpIHtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdpbnB1dF9pbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBlcnJvci5jbGFzc0xpc3QuYWRkKCdlcnJvcl9hY3RpdmUnKTtcbiAgICAgICAgICAgIGVycm9yLmlubmVySFRNTCA9IG1zZztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzdGF0aWMgX3ZhbGlkYXRlT2JsaWdhdG9yeUlucHV0cyAoaW5wdXRzID0ge30pIHtcbiAgICAgICAgbGV0IHdhc2ZhaWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKGlucHV0cykge1xuICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICBpZiAoVmFsaWRhdGlvbi5pc0VtcHR5RmllbGQoaW5wdXQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZElucHV0RXJyb3IoaW5wdXQsIGVycm9yLCAn0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1Jyk7XG4gICAgICAgICAgICAgICAgICAgIHdhc2ZhaWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2FzZmFpbDtcbiAgICB9XG5cbiAgICBzdGF0aWMgX3JlbW92ZUlucHV0RXJyb3IgKGlucHV0LCBlcnJvcikge1xuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0X2ludmFsaWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yX2FjdGl2ZScpO1xuICAgICAgICAgICAgZXJyb3IuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fcm9vdC5pbm5lckhUTUwgPSB0aGlzLl90ZW1wbGF0ZShkYXRhKTtcbiAgICAgICAgdGhpcy5pc1ZpZXdDbG9zZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLm9uUmVuZGVyKCk7XG4gICAgfVxuXG4gICAgb25SZW5kZXIgKCkge1xuXG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5fcm9vdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5pc1ZpZXdDbG9zZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIG1lcmdlIChkYXRhKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSB7IC4uLnRoaXMuX2RhdGEsIC4uLmRhdGEgfTtcbiAgICB9XG59XG4iLCJcbmV4cG9ydCBjb25zdCBBVVRIID0ge1xuICAgIGNoZWNrQXV0aDogJ2NoZWNrQXV0aCcsXG4gICAgY2hlY2tBdXRoUmVzcG9uc2U6ICdhdXRoUicsXG5cbiAgICBzaWduT3V0OiAnc2lnbk91dCcsXG4gICAgc2lnbk91dFJlc3BvbnNlOiAnc2lnbk91dFInLFxuXG4gICAgc2lnbkluOiAnc2lnbkluJyxcbiAgICBzaWduSW5TdWNjZXNzOiAnc2lnbkluUycsXG4gICAgc2lnbkluRmFpbGVkOiAnc2lnbkluRicsXG5cbiAgICBzaWduVXBDdXN0b21lcjogJ3NpZ25VcEN1c3RvbWVyJyxcbiAgICBzaWduVXBTdWNjZXNzOiAnc2lnblVwUycsXG4gICAgc2lnblVwRmFpbGVkOiAnc2lnblVwRicsXG5cbn07XG5cbmV4cG9ydCBjb25zdCBGSUxNID0ge1xuICAgIGdldEZpbG1zOiAnZ2V0RmlsbXMnLFxuICAgIGdldEZpbG1zU3VjY2VzczogJ2dldEZpbG1zUycsXG4gICAgZ2V0RmlsbXNGYWlsZWQ6ICdnZXRGaWxtc0YnLFxuXG4gICAgY3JlYXRlRmlsbTogJ2NyZWF0ZUZpbG0nLFxuICAgIGNyZWF0ZUZpbG1TdWNjZXNzOiAnY3JlYXRlRmlsbVMnLFxuICAgIGNyZWF0ZUZpbG1GYWlsZWQ6ICdjcmVhdGVGaWxtRicsXG5cbiAgICBnZXRGaWxtOiAnZ2V0RmlsbScsXG4gICAgZ2V0RmlsbVN1Y2Nlc3M6ICdnZXRGaWxtUycsXG4gICAgZ2V0RmlsbUZhaWxlZDogJ2dldEZpbG1GJyxcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9GSUxFID0ge1xuICAgIGxvYWRQcm9maWxlOiAnbG9hZFByb2ZpbGUnLFxuICAgIGxvYWRQcm9maWxlU3VjY2VzczogJ2xvYWRQcm9maWxlUycsXG4gICAgbG9hZFByb2ZpbGVGYWlsZWQ6ICdsb2FkUHJvZmlsZUYnLFxuICAgIHNhdmVCdXR0b25DbGlja2VkOiAnc2F2ZUJ1dHRvbkMnLFxuICAgIHNhdmVQcm9maWxlOiAnc2F2ZVByb2ZpbGUnLFxuICAgIHNhdmVQcm9maWxlU3VjY2VzczogJ3NhdmVQcm9maWxlUycsXG4gICAgc2F2ZVByb2ZpbGVGYWlsZWQ6ICdzYXZlUHJvZmlsZUYnLFxuICAgIHNhdmVBdmF0YXI6ICdzYXZlQXZhdGFyJyxcbiAgICBzYXZlQXZhdGFyU3VjY2VzczogJ3NhdmVBdmF0YXJTJyxcbiAgICBzYXZlQXZhdGFyRmFpbGVkOiAnc2F2ZUF2YXRhckYnLFxufTtcbiIsImltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL1Bvc3Rlci5wdWcnO1xuaW1wb3J0IHtWaWV3fSBmcm9tICcuLi8uLi9tb2R1bGVzL3ZpZXcnO1xuaW1wb3J0IHtBVVRIfSBmcm9tICcuLi8uLi9tb2R1bGVzL2V2ZW50cydcblxuZXhwb3J0IGNsYXNzIFBvc3RlclZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICBjb25zdHJ1Y3Rvcihyb290LCBldmVudEJ1cywgZ2xvYmFsRXZlbnRCdXMpIHtcbiAgICAgICAgc3VwZXIocm9vdCwgdGVtcGxhdGUsIGV2ZW50QnVzLCBnbG9iYWxFdmVudEJ1cyk7XG4gICAgICAgIHRoaXMuX2dsb2JhbEV2ZW50QnVzLnN1YnNjcmliZVRvRXZlbnQoQVVUSC5jaGVja0F1dGhSZXNwb25zZSwgdGhpcy5fb25BdXRoUmVzcG9uc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKGRhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLm1lcmdlKGRhdGEpO1xuICAgICAgICB0aGlzLmlzVmlld0Nsb3NlZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2dsb2JhbEV2ZW50QnVzLnRyaWdnZXJFdmVudChBVVRILmNoZWNrQXV0aCk7XG4gICAgICAgIHN1cGVyLnJlbmRlcihkYXRhKVxuICAgIH1cblxuICAgIG9uUmVuZGVyKCkge1xuICAgIH1cblxuICAgIF9vbkF1dGhSZXNwb25zZShkYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlld0Nsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tZXJnZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5yZW5kZXIodGhpcy5fZGF0YSk7XG4gICAgfVxufSIsImltcG9ydCB7Vmlld30gZnJvbSBcIi4vdmlld1wiO1xuaW1wb3J0IHtSb3V0ZXJ9IGZyb20gXCIuL3JvdXRlclwiO1xuaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vZXZlbnRidXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbnRyb2xsZXIge1xuICAgIF92aWV3ID0gbmV3IFZpZXcoKTtcbiAgICBjb25zdHJ1Y3RvciAocm9vdCwgZ2xvYmFsRXZlbnRCdXMsIHJvdXRlcikge1xuICAgICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICAgICAgdGhpcy5fZ2xvYmFsRXZlbnRCdXMgPSBnbG9iYWxFdmVudEJ1cztcbiAgICAgICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xuICAgIH1cblxuICAgIG9wZW5XaXRoRGF0YSA9IChkYXRhID0ge30pID0+IHtcbiAgICAgICAgdGhpcy5fdmlldy5yZW5kZXIoZGF0YSk7XG4gICAgfVxuXG4gICAgY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZpZXcuaGlkZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBvc3RlclZpZXcgfSBmcm9tICcuLi92aWV3cy9Qb3N0ZXIvUG9zdGVyJztcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuLi9tb2R1bGVzL2NvbnRyb2xsZXInO1xuXG5leHBvcnQgY2xhc3MgUG9zdGVyQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yIChyb290LCBnbG9iYWxFdmVudEJ1cywgcm91dGVyKSB7XG4gICAgICAgIHN1cGVyKHJvb3QsIGdsb2JhbEV2ZW50QnVzLCByb3V0ZXIpO1xuXG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgUG9zdGVyVmlldyh0aGlzLl9yb290LCB0aGlzLl9nbG9iYWxFdmVudEJ1cyk7XG4gICAgfVxuXG59XG4iLCJjb25zdCBzZXJ2ZXJVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTo4MDgwJztcblxuLyoqXG4gKiBOZXcgTmV0d29yayBvYmpcbiAqIEBjbGFzc1xuICogQHR5cGUge05ldHdvcmt9XG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmV0d29yayB7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVxdWVzdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cblxuICAgIHN0YXRpYyBkb0dldChwYXRoID0gJy8nKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChOZXR3b3JrLmdldFNlcnZlclVybCgpICsgcGF0aCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIG1vZGU6ICduby1jb3JzJyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvc3QgcmVxdWVzdFxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBib2R5XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGhvc3RcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG5cbiAgICBzdGF0aWMgZG9Qb3N0KHBhdGggPSAnLycsIGJvZHkgID0ge30sIGhvc3QgPSBOZXR3b3JrLmdldFNlcnZlclVybCgpKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChob3N0ICsgcGF0aCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogREVMRVRFIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cblxuICAgIHN0YXRpYyBkb0RlbGV0ZShwYXRoID0gJy8nKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChOZXR3b3JrLmdldFNlcnZlclVybCgpICsgcGF0aCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBVVCByZXF1ZXN0XG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGJvZHlcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cblxuICAgIHN0YXRpYyBkb1B1dChwYXRoID0gJy8nLCBib2R5ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKE5ldHdvcmsuZ2V0U2VydmVyVXJsKCkgKyBwYXRoLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBtb2RlOiBcImNvcnNcIixcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIFBvc3QgZm9ybURhdGFcbiAgICAgKiAgQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAgICAgKiAgQHN0YXRpY1xuICAgICAqICBAcGFyYW0ge09iamVjdH0gYm9keVxuICAgICAqICBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG5cbiAgICBzdGF0aWMgZG9Qb3N0Rm9ybURhdGEgKHsgdXJsID0gJy8nLCBib2R5ID0ge30gfSA9IHt9KSB7XG4gICAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgICByZXR1cm4gZmV0Y2goTmV0d29yay5nZXRTZXJ2ZXJVcmwoKSArIHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnWC1DU1JGLVRva2VuJzogdG9rZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUFVUIGZvcm0tZGF0YSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYm9keVxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cbiAgICBzdGF0aWMgZG9QdXRGb3JtRGF0YShwYXRoID0gJy8nLCBib2R5KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChOZXR3b3JrLmdldFNlcnZlclVybCgpICsgcGF0aCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJ2ZXIgVVJMXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cblxuICAgIHN0YXRpYyBnZXRTZXJ2ZXJVcmwoKSB7XG4gICAgICAgIHJldHVybiBzZXJ2ZXJVcmxcbiAgICB9XG59IiwiaW1wb3J0IE5ldHdvcmsgZnJvbSAnLi9uZXR3b3JrJztcblxuLyoqXG4gKiBBUEkgb2JqZWN0XG4gKiBAY2xhc3NcbiAqIEB0eXBlIHtBcGl9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG5cbiAgICAvKipcbiAgICAgKiBBUEkgTG9naW5cbiAgICAgKiBQT1NUIC9zZXNzaW9ucy9cbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxuICAgICAqL1xuICAgIHN0YXRpYyBsb2dpbih7ZW1haWwsIHBhc3N3b3JkfSkge1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb1Bvc3QoJy9zZXNzaW9ucy8nLCB7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgQ2hlY2sgYXV0aFxuICAgICAqIEdFVCAvc2Vzc2lvbnMvXG4gICAgICogQHN0YXRpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cbiAgICBzdGF0aWMgYXV0aENoZWNrKCkge1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb0dldCgnL3Nlc3Npb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgTG9nb3V0XG4gICAgICogZGVsZXRlIC9zZXNzaW9ucy9cbiAgICAgKiBAc3RhdGljXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxuICAgICAqL1xuICAgIHN0YXRpYyBsb2dvdXQoKSB7XG4gICAgICAgIHJldHVybiBOZXR3b3JrLmRvRGVsZXRlKCcvc2Vzc2lvbi8nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgUmVnaXN0cmF0aW9uXG4gICAgICogUE9TVCAvdXNlcnMvXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZVxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cbiAgICBzdGF0aWMgcmVnaXN0ZXIoe2VtYWlsLCBwYXNzd29yZCwgdXNlcm5hbWV9KSB7XG4gICAgICAgIHJldHVybiBOZXR3b3JrLmRvUG9zdCgnL3VzZXJzLycsIHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIEVkaXQgYXZhdGFyXG4gICAgICogUE9TVCAvaW1hZ2VzL1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXZhdGFyIC0g0L3QvtCy0L7QtSDQuNC30L7QsdGA0LDQttC10L3QuNC1XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJRFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cbiAgICBzdGF0aWMgZWRpdEF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBhdmF0YXIuYXZhdGFyKTtcbiAgICAgICAgcmV0dXJuIE5ldHdvcmsuZG9Qb3N0Rm9ybURhdGEoJy91c2Vycy9pbWFnZXMvJywgZm9ybURhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSBFZGl0IHByb2ZpbGVcbiAgICAgKiBQVVQgL3VzZXJzL1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb25cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgc3RhdGljIGVkaXRQcm9maWxlKHt1c2VybmFtZSwgZGVzY3JpcHRpb259KSB7XG4gICAgICAgIHJldHVybiBOZXR3b3JrLmRvUHV0KCcvdXNlcnMvJywge1xuICAgICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQVBJIEdldCBwcm9maWxlIGluZm9cbiAgICAgKiBHRVQgL3VzZXJzL1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgc3RhdGljIGdldFByb2ZpbGVJbmZvKCkge1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb0dldCgnL3VzZXJzLycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFQSSBHZXQgYW5vdGhlciB1c2VyIGluZm9cbiAgICAgKiBHRVQgL3VzZXJzL3t1c2VyX2lkfVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgc3RhdGljIGdldEFub3RoZXJVc2VySW5mbyh7dXNlcklEfSkge1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb0dldChgL3VzZXJzLyR7dXNlcklEfS9gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgR2V0IGZpbG0gaW5mb1xuICAgICAqIEdFVCAvZmlsbXMve2ZpbG1faWR9L1xuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsbUlEXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRGaWxtSW5mbyh7ZmlsbUlEfSkge1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb0dldChgL2ZpbG1zLyR7ZmlsbUlEfS9gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgR2V0IGFsbCBmaWxtcyBmb3IgY2VydGFpbiBwYWdlXG4gICAgICogR0VUIC9maWxtcy97cGFnZUlEfS9cbiAgICAgKiBAcGFyYW0gcGFnZUlEXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRQYWdlRmlsbXMoe3BhZ2VJRH0pe1xuICAgICAgICByZXR1cm4gTmV0d29yay5kb0dldChgL2ZpbG1zLyR7cGFnZUlEfS9gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgQWRkIG5ldyBmaWxtXG4gICAgICogUE9TVCAvZmlsbXMvXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjcmlwdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGdlbnJlc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYWN0b3JzXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGlyZWN0b3JzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGluZ1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkTmV3RmlsbSh7dGl0bGUsIGRlc2NyaXB0aW9uLCBnZW5yZXMsIGRhdGUsIGFjdG9ycywgZGlyZWN0b3JzLCByYXRpbmd9KSB7XG4gICAgICAgIHJldHVybiBOZXR3b3JrLmRvUG9zdCgnL2ZpbG1zLycsIHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBnZW5yZXMsXG4gICAgICAgICAgICBkYXRlLFxuICAgICAgICAgICAgYWN0b3JzLFxuICAgICAgICAgICAgZGlyZWN0b3JzLFxuICAgICAgICAgICAgcmF0aW5nLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBUEkgQ2hlY2sgc2Vzc2lvblxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XG4gICAgICovXG4gICAgc3RhdGljIGNoZWNrU2Vzc2lvbiAoKSB7XG4gICAgICAgIHJldHVybiBOZXR3b3JrLmRvR2V0KHsgdXJsOiAnL2F1dGgnIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgYXBpIGZyb20gXCIuLi9tb2R1bGVzL2FwaVwiO1xuaW1wb3J0IHtBVVRIfSBmcm9tIFwiLi4vbW9kdWxlcy9ldmVudHNcIjtcblxuY2xhc3MgUG9zdGVyTW9kZWwge1xuICAgIF9sb2FkUGFnZShpZCl7XG4gICAgICAgIGFwaS5nZXRQYWdlRmlsbXMoaWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JhbEV2ZW50QnVzLnRyaWdnZXJFdmVudCgnbG9hZFN1Y2Nlc3MnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dsb2JhbEV2ZW50QnVzLnRyaWdnZXJFdmVudCgnbG9hZEZhaWxlZCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXRHbG9iYWxFdmVudEJ1cyAoZ2xvYmFsRXZlbnRCdXMpIHtcbiAgICAgICAgdGhpcy5fZ2xvYmFsRXZlbnRCdXMgPSBnbG9iYWxFdmVudEJ1cztcbiAgICAgICAgdGhpcy5fZ2xvYmFsRXZlbnRCdXMuc3Vic2NyaWJlVG9FdmVudChBVVRILmNoZWNrQXV0aCwgdGhpcy5fb25DaGVja0F1dGguYmluZCh0aGlzKSlcblxuICAgIH1cblxuICAgIF9vbkNoZWNrQXV0aCgpe1xuICAgICAgICBhcGkuYXV0aENoZWNrKClcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PntcbiAgICAgICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUG9zdGVyTW9kZWwoKTsiLCJpbXBvcnQge1ZpZXd9IGZyb20gXCIuLi8uLi9tb2R1bGVzL3ZpZXdcIjtcbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL01lbnUucHVnJ1xuaW1wb3J0IHtBVVRIfSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9ldmVudHNcIjtcblxuZXhwb3J0IGNsYXNzIE1lbnVWaWV3IGV4dGVuZHMgVmlld3tcbiAgICBjb25zdHJ1Y3RvciAocm9vdCwgZ2xvYmFsRXZlbnRCdXMpIHtcbiAgICAgICAgc3VwZXIocm9vdCwgdGVtcGxhdGUsIGdsb2JhbEV2ZW50QnVzKTtcblxuICAgICAgICB0aGlzLl9nbG9iYWxFdmVudEJ1cy5zdWJzY3JpYmVUb0V2ZW50KEFVVEguY2hlY2tBdXRoUmVzcG9uc2UsIHRoaXMuX29uQXV0aFJlc3BvbnNlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHJlbmRlciAoZGF0YSA9IHt9KSB7XG4gICAgICAgIHN1cGVyLnJlbmRlcihkYXRhKTtcbiAgICB9XG5cbiAgICBfb25BdXRoUmVzcG9uc2UgKGRhdGEpIHtcbiAgICAgICAgc3VwZXIucmVuZGVyKGRhdGEpO1xuICAgIH1cbn0iLCJpbXBvcnQge01lbnVWaWV3fSBmcm9tIFwiLi4vdmlld3MvTWVudS9NZW51XCI7XG5pbXBvcnQge0NvbnRyb2xsZXJ9IGZyb20gXCIuLi9tb2R1bGVzL2NvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGNsYXNzIE1lbnVDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcntcbiAgICBjb25zdHJ1Y3RvciAocm9vdCwgZ2xvYmFsRXZlbnRCdXMsIHJvdXRlcikge1xuICAgICAgICBzdXBlcihyb290LCBnbG9iYWxFdmVudEJ1cywgcm91dGVyKTtcbiAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBNZW51Vmlldyh0aGlzLl9yb290LCB0aGlzLl9nbG9iYWxFdmVudEJ1cyk7XG4gICAgfVxufSIsImltcG9ydCB7Um91dGVyfSBmcm9tICcuL21vZHVsZXMvcm91dGVyJztcbmltcG9ydCB7RXZlbnRCdXN9IGZyb20gJy4vbW9kdWxlcy9ldmVudGJ1cyc7XG5pbXBvcnQge1Bvc3RlckNvbnRyb2xsZXJ9IGZyb20gXCIuL2NvbnRyb2xsZXJzL3Bvc3RlckNvbnRyb2xsZXJcIjtcbmltcG9ydCBQb3N0ZXJNb2RlbCBmcm9tICcuL21vZGVscy9wb3N0ZXJNb2RlbCdcbmltcG9ydCB7QVVUSCwgUFJPRklMRX0gZnJvbSBcIi4vbW9kdWxlcy9ldmVudHNcIjtcbmltcG9ydCB7TWVudUNvbnRyb2xsZXJ9IGZyb20gXCIuL2NvbnRyb2xsZXJzL21lbnVDb250cm9sbGVyXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQnKTtcbiAgICBjb25zdCBnbG9iYWxFdmVudEJ1cyA9IG5ldyBFdmVudEJ1cyhbQVVUSCwgUFJPRklMRV0ubWFwKG1vZGVsID0+IE9iamVjdC52YWx1ZXMobW9kZWwpKS5mbGF0KCkpO1xuICAgIGNvbnN0IG1vZGVscyA9IHtcbiAgICAgICAgcG9zdGVyOiBQb3N0ZXJNb2RlbCxcbiAgICB9O1xuICAgIE9iamVjdC52YWx1ZXMobW9kZWxzKS5mb3JFYWNoKG1vZGVsID0+IG1vZGVsLnNldEdsb2JhbEV2ZW50QnVzKGdsb2JhbEV2ZW50QnVzKSk7XG5cbiAgICBjb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKGJvZHkpO1xuXG4gICAgY29uc3QgbWVudUNvbnRyb2xsZXIgPSBuZXcgTWVudUNvbnRyb2xsZXIoaGVhZGVyLCBnbG9iYWxFdmVudEJ1cywgcm91dGVyKTtcbiAgICBjb25zdCBwb3N0ZXJDb250cm9sbGVyID0gbmV3IFBvc3RlckNvbnRyb2xsZXIoY29udGVudCwgZ2xvYmFsRXZlbnRCdXMsIHJvdXRlcik7XG4gICAgbWVudUNvbnRyb2xsZXIub3BlbldpdGhEYXRhKCk7XG4gICAgcm91dGVyLmFkZCgnLycsIHBvc3RlckNvbnRyb2xsZXIpO1xuICAgIHJvdXRlci5zdGFydCgpO1xufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==